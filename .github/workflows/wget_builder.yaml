# Fork: https://github.com/shutingrz/busybox-static-binaries-fat/tree/main
name: Build || Fetch Wget Binaries

on:
  workflow_dispatch:

env:
  #Update @latest: https://github.com/riscv-collab/riscv-gnu-toolchain/releases #32 glibc Ubuntu: 22.04 
  #RISCV32_TOOLCHAIN_URL: https://github.com/riscv-collab/riscv-gnu-toolchain/releases/download/2023.04.21/riscv32-glibc-ubuntu-22.04-nightly-2023.04.21-nightly.tar.gz
  RISCV32_TOOLCHAIN_URL: https://github.com/riscv-collab/riscv-gnu-toolchain/releases/download/2023.07.07/riscv32-glibc-ubuntu-22.04-gcc-nightly-2023.07.07-nightly.tar.gz
  #Update @latest: https://busybox.net/downloads/ # 
  #BUSYBOX_URL: https://busybox.net/downloads/busybox-1.36.0.tar.bz2 
  BUSYBOX_URL: https://busybox.net/downloads/busybox-1.36.1.tar.bz2
  BUSYBOX_DIRNAME: busybox-1.36.1

jobs:
  build:
    runs-on: ubuntu-22.04

    permissions:
      contents: write

    steps:
      - uses: actions/checkout@v3
        with:
          path: main
      - name: Install build dependencies
        run: "\
          sudo apt-get update\n
          sudo apt-get install -y --no-install-recommends build-essential ca-certificates jq p7zip-full wget  \
          file qemu-user-static \
          g++-aarch64-linux-gnu \
          g++-arm-linux-gnueabi \
          g++-arm-linux-gnueabihf \
          g++-i686-linux-gnu \
          g++-m68k-linux-gnu \
          g++-mips-linux-gnu \
          g++-mipsel-linux-gnu \
          g++-mips64-linux-gnuabi64 \
          g++-mips64el-linux-gnuabi64 \
          g++-powerpc-linux-gnu \
          g++-powerpc64-linux-gnu \
          g++-powerpc64le-linux-gnu \
          g++-riscv64-linux-gnu \
          g++-s390x-linux-gnu \
          g++-sh4-linux-gnu libc6-dev-sh4-cross\n
          sudo mkdir -p /usr/local/rv32\n
          wget -O- -q $RISCV32_TOOLCHAIN_URL | sudo tar -C /usr/local/rv32 --strip-components=1 -xzf -\n
          sudo ln -s /usr/local/rv32/sysroot /usr/riscv32-linux-gnu\n
          sudo ln -s /usr/local/rv32/bin/riscv32-unknown-linux-gnu-ar /usr/bin/riscv32-linux-gnu-ar\n
          sudo ln -s /usr/local/rv32/bin/riscv32-unknown-linux-gnu-strip /usr/bin/riscv32-linux-gnu-strip\n
          echo '/usr/local/rv32/bin/riscv32-unknown-linux-gnu-gcc -L/usr/riscv32-linux-gnu \"$@\"' | sudo tee /usr/bin/riscv32-linux-gnu-gcc > /dev/null\n
          sudo chmod +x /usr/bin/riscv32-linux-gnu-gcc\n
          mkdir busybox\n"
    #Linux    
     #amd_x86_64
      - name: Build wget-busybox for x86_64 (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_amd_x86_64_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_amd_x86_64_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox
        continue-on-error: true
      - name: Build wget-busybox for x86_64 (MUSL-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          sed -i 's/^\(CONFIG_CROSS_COMPILER_PREFIX\)=""/\1="musl-"/' .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_amd_x86_64_musl_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_amd_x86_64_musl_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox
        continue-on-error: true   

     #aarch64_arm64
      - name: Build wget-busybox for aarch64 (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=aarch64
          export CROSS_COMPILE=aarch64-linux-gnu-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_aarch_arm64_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_aarch_arm64_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox
        continue-on-error: true             
      - name: Build wget-busybox for aarch64 (MUSL-DockerCross)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && cd "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME"
          docker run --privileged -v $(pwd):/work dockcross/linux-arm64-musl bash -c "make defconfig"
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          sed 's/^\(CONFIG_CROSS_COMPILER_PREFIX\)=""/\1="musl-"/' -i .config           
          docker run --privileged -v $(pwd):/work dockcross/linux-arm64-musl bash -c "./make_single_applets.sh WGET"
          cp "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME/busybox_WGET" "$GITHUB_WORKSPACE/main/wget/wget_busybox_aarch_arm64_musl_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_aarch_arm64_musl_Linux"
          cd .. && sudo rm -rf "./build" "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME" > /dev/null 2>&1
        working-directory: busybox
        continue-on-error: true                               
                    
     #arm
      - name: Build wget-busybox for arm-linux-gnueabi (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=arm
          export CROSS_COMPILE=arm-linux-gnueabi-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_arm_gnueabi_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_arm_gnueabi_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox
        continue-on-error: true     
      - name: Build wget-busybox for arm-linux-armv6 (MUSL-DockerCross)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && cd "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME"
          docker run --privileged -v $(pwd):/work dockcross/linux-armv6 bash -c "make defconfig"
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          sed 's/^\(CONFIG_CROSS_COMPILER_PREFIX\)=""/\1="musl-"/' -i .config           
          docker run --privileged -v $(pwd):/work dockcross/linux-armv6 bash -c "./make_single_applets.sh WGET"
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_arm_armv6_musl_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_arm_armv6_musl_Linux"
          cd .. && sudo rm -rf "./build" "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME" > /dev/null 2>&1
        working-directory: busybox
        continue-on-error: true          
      - name: Build wget-busybox for arm-linux-gnueabihf (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=arm
          export CROSS_COMPILE=arm-linux-gnueabihf-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_arm_gnueabihf_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_arm_gnueabihf_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox
        continue-on-error: true
      - name: Build wget-busybox for arm-linux-gnueabihf_armv7l (MUSL-DockerCross)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && cd "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME"
          docker run --privileged -v $(pwd):/work dockcross/linux-armv7l-musl bash -c "make defconfig"
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          sed 's/^\(CONFIG_CROSS_COMPILER_PREFIX\)=""/\1="musl-"/' -i .config           
          docker run --privileged -v $(pwd):/work dockcross/linux-armv7l-musl bash -c "./make_single_applets.sh WGET"
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_arm_gnueabihf_armv7l_musl_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_arm_gnueabihf_armv7l_musl_Linux"
          cd .. && sudo rm -rf "./build" "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME" > /dev/null 2>&1
        working-directory: busybox
        continue-on-error: true  

     #i686      
      - name: Build wget-busybox for i686 (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=i686
          export CROSS_COMPILE=i686-linux-gnu-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_i686_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_i686_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build" 
        working-directory: busybox   
        continue-on-error: true
      - name: Build wget-busybox for i686 (MUSL-DockerCross)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && cd "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME"
          docker run --privileged -v $(pwd):/work dockcross/linux-i686 bash -c "make defconfig"
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          sed 's/^\(CONFIG_CROSS_COMPILER_PREFIX\)=""/\1="musl-"/' -i .config           
          docker run --privileged -v $(pwd):/work dockcross/linux-i686 bash -c "./make_single_applets.sh WGET"
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_i686_musl_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_i686_musl_Linux"
          cd .. && sudo rm -rf "./build" "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME" > /dev/null 2>&1
        working-directory: busybox
        continue-on-error: true  

     #m68k      
      - name: Build wget-busybox for m68k (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=m68k
          export CROSS_COMPILE=m68k-linux-gnu-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_m68k_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_m68k_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox
        continue-on-error: true
      - name: Build wget-busybox for m68k (MUSL-DockerCross)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && cd "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME"
          docker run --privileged -v $(pwd):/work dockcross/linux-m68k-uclibc bash -c "make defconfig"
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          sed 's/^\(CONFIG_CROSS_COMPILER_PREFIX\)=""/\1="musl-"/' -i .config           
          docker run --privileged -v $(pwd):/work dockcross/linux-m68k-uclibc bash -c "./make_single_applets.sh WGET"
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_m68k_musl_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_m68k_musl_Linux"
          cd .. && sudo rm -rf "./build" "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME" > /dev/null 2>&1
        working-directory: busybox
        continue-on-error: true  
        
     #mips 
      - name: Build wget-busybox for mips-linux-gnu (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=mips
          export CROSS_COMPILE=mips-linux-gnu-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_mips_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_mips_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox
        continue-on-error: true
      - name: Build wget-busybox for mips-linux-gnu (MUSL-DockerCross)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && cd "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME"
          docker run --privileged -v $(pwd):/work dockcross/linux-mips bash -c "make defconfig"
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          sed 's/^\(CONFIG_CROSS_COMPILER_PREFIX\)=""/\1="musl-"/' -i .config           
          docker run --privileged -v $(pwd):/work dockcross/linux-mips bash -c "./make_single_applets.sh WGET"
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_mips_musl_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_mips_musl_Linux"
          cd .. && sudo rm -rf "./build" "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME" > /dev/null 2>&1
        working-directory: busybox
        continue-on-error: true  

    #mipsel
      - name: Build wget-busybox for mipsel-linux-gnu (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=mips
          export CROSS_COMPILE=mipsel-linux-gnu-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_mipsel_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_mipsel_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox
        continue-on-error: true
      - name: Build wget-busybox for mipsel-linux-gnu (MUSL-DockerCross)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && cd "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME"
          docker run --privileged -v $(pwd):/work dockcross/linux-mipsel-lts bash -c "make defconfig"
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          sed 's/^\(CONFIG_CROSS_COMPILER_PREFIX\)=""/\1="musl-"/' -i .config           
          docker run --privileged -v $(pwd):/work dockcross/linux-mipsel-lts bash -c "./make_single_applets.sh WGET"
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_mipsel_musl_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_mipsel_musl_Linux"
          cd .. && sudo rm -rf "./build" "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME" > /dev/null 2>&1
        working-directory: busybox
        continue-on-error: true      

    #mips64    
      - name: Build wget-busybox for mips64-linux-gnuabi64 (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=mips64
          export CROSS_COMPILE=mips64-linux-gnuabi64-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_mips64_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_mips64_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox
        continue-on-error: true
      - name: Build wget-busybox for mips64el-linux-gnuabi64 (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=mips64
          export CROSS_COMPILE=mips64el-linux-gnuabi64-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_mips64el_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_mips64el_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox 
        continue-on-error: true

     #ppc         
      - name: Build wget-busybox for powerpc (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=powerpc
          export CROSS_COMPILE=powerpc-linux-gnu-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_powerpc_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_powerpc_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox 
        continue-on-error: true
     #ppc64  
      - name: Build wget-busybox for powerpc64 (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=powerpc64
          export CROSS_COMPILE=powerpc64-linux-gnu-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_powerpc64_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_powerpc64_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"      
        working-directory: busybox
        continue-on-error: true
     #ppc64le   
      - name: Build wget-busybox for powerpc64le-linux-gnu (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=powerpc
          export CROSS_COMPILE=powerpc64le-linux-gnu-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_powerpc64le_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_powerpc64le_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox
        continue-on-error: true
      - name: Build wget-busybox for powerpc64le-linux-gnu (MUSL-DockerCross)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && cd "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME"
          docker run --privileged -v $(pwd):/work dockcross/linux-ppc64le bash -c "make defconfig"
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          sed 's/^\(CONFIG_CROSS_COMPILER_PREFIX\)=""/\1="musl-"/' -i .config           
          docker run --privileged -v $(pwd):/work dockcross/linux-ppc64le bash -c "./make_single_applets.sh WGET"
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_powerpc64le_musl_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_powerpc64le_musl_Linux"
          cd .. && sudo rm -rf "./build" "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME" > /dev/null 2>&1
        working-directory: busybox
        continue-on-error: true     

     #risc32         
      - name: Build wget-busybox for riscv32-linux-gnu (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=riscv
          export CROSS_COMPILE=riscv32-linux-gnu-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_riscv32_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_riscv32_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox
        continue-on-error: true
      - name: Build wget-busybox for riscv32-linux-gnu (MUSL-DockerCross)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && cd "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME"
          docker run --privileged -v $(pwd):/work dockcross/linux-riscv32 bash -c "make defconfig"
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          sed 's/^\(CONFIG_CROSS_COMPILER_PREFIX\)=""/\1="musl-"/' -i .config           
          docker run --privileged -v $(pwd):/work dockcross/linux-riscv32 bash -c "./make_single_applets.sh WGET"
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_riscv32_musl_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_riscv32_musl_Linux"
          cd .. && sudo rm -rf "./build" "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME" > /dev/null 2>&1
        working-directory: busybox
        continue-on-error: true 
     #risv64
      - name: Build wget-busybox for riscv64-linux-gnu (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=riscv
          export CROSS_COMPILE=riscv64-linux-gnu-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_riscv64_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_riscv64_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox
        continue-on-error: true
      - name: Build wget-busybox for riscv64-linux-gnu (MUSL-DockerCross)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && cd "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME"
          docker run --privileged -v $(pwd):/work dockcross/linux-riscv64 bash -c "make defconfig"
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          sed 's/^\(CONFIG_CROSS_COMPILER_PREFIX\)=""/\1="musl-"/' -i .config           
          docker run --privileged -v $(pwd):/work dockcross/linux-riscv64 bash -c "./make_single_applets.sh WGET"
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_riscv64_musl_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_riscv64_musl_Linux"
          cd .. && sudo rm -rf "./build" "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME" > /dev/null 2>&1
        working-directory: busybox
        continue-on-error: true 

     #s390x         
      - name: Build wget-busybox for s390x (GCC-Native)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && mkdir build ; cd build
          export ARCH=s390x
          export CROSS_COMPILE=s390x-linux-gnu-
          make KBUILD_SRC="../$BUSYBOX_DIRNAME" -f "../$BUSYBOX_DIRNAME/Makefile" defconfig
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          bash "../$BUSYBOX_DIRNAME/make_single_applets.sh" WGET
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_s390x_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_s390x_Linux"
          cd "$GITHUB_WORKSPACE/busybox" && rm -rf "$GITHUB_WORKSPACE/busybox/build"
        working-directory: busybox  
        continue-on-error: true
      - name: Build wget-busybox for s390x (MUSL-DockerCross)
        run: |
          wget -O- -q $BUSYBOX_URL | tar jxf - && cd "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME"
          docker run --privileged -v $(pwd):/work dockcross/linux-s390x bash -c "make defconfig"
          sed -e 's/.*\<CONFIG_STATIC\>.*/CONFIG_STATIC=y/' -i .config
          sed 's/^\(CONFIG_CROSS_COMPILER_PREFIX\)=""/\1="musl-"/' -i .config           
          docker run --privileged -v $(pwd):/work dockcross/linux-s390x bash -c "./make_single_applets.sh WGET"
          cp busybox_WGET "$GITHUB_WORKSPACE/main/wget/wget_busybox_s390x_musl_Linux"
          chmod +x "$GITHUB_WORKSPACE/main/wget/wget_busybox_s390x_musl_Linux"
          cd .. && sudo rm -rf "./build" "$GITHUB_WORKSPACE/busybox/$BUSYBOX_DIRNAME" > /dev/null 2>&1
        working-directory: busybox
        continue-on-error: true 

  #Windows 
      - name: Fetch wget for windows
        run: |
          for url in $(curl -s "https://api.github.com/repos/lifenjoiner/wget-for-windows/releases/latest" | jq -r '.assets[].browser_download_url'); do curl -LOJ "$url"; done
          find . -type f -name '*mingw32*.zip' -exec unzip -j -o {} -d win32 \; && cp "./win32/wget.exe" "$GITHUB_WORKSPACE/main/wget/wget_amd_x86_lite_Windows.exe"
          find . -type f -name '*WinTLS*.7z' -exec 7z x {} -o"win32_TLS" -y \; && cp "./win32_TLS/wget.exe" "$GITHUB_WORKSPACE/main/wget/wget_amd_x86_WinTLS_lite_Windows.exe" 
          find . -type f -name '*mingw64*.zip' -exec unzip -j -o {} -d win64 \; && cp "./win64/wget.exe" "$GITHUB_WORKSPACE/main/wget/wget_amd_x86_x64_lite_Windows.exe"
        working-directory: busybox  
        continue-on-error: true

  #Base64        
      - name: Generate '.base64' 
        run: |
          cd "$GITHUB_WORKSPACE/main/wget" && find . -type f ! -name '*.md' ! -name '*.base64' -exec sh -c 'base64 -w 0 "$1" > "$1.base64"' _ {} \;
        working-directory: busybox    
        continue-on-error: true
  #Update Readme      
      - name: Update README.md
        run: |
           cd "$GITHUB_WORKSPACE/main"
           cat ./wget/INFO.md > ./wget/README.md
           echo -e "" >> ./wget/README.md
           echo '---' >> ./wget/README.md
           echo '```console' >> ./wget/README.md
           /bin/bash -c 'PS4="$ "; set -x; file ./wget/wget_*' &>> ./wget/README.md
           echo -e "" >> ./wget/README.md
           echo -e "--> SHA256SUM" >> ./wget/README.md
           /bin/bash -c 'PS4="$ "; set -x; sha256sum ./wget/wget_*' &>> ./wget/README.md
           echo -e "" >> ./wget/README.md
           echo -e "--> Sizes" >> ./wget/README.md
           /bin/bash -c 'PS4="$ "; ls -lh ./wget/wget_* | awk "{print \$5, \$9}" | column -t' &>> ./wget/README.md
           echo -e "" >> ./wget/README.md
           echo -e '```\n' >> ./wget/README.md
           echo -e "" >> ./wget/README.md
           echo '---' >> ./wget/README.md
           echo -e "" >> ./wget/README.md
           echo '- #### Flags' >> ./wget/README.md
           echo '```console' >> ./wget/README.md
           /bin/bash -c 'PS4="$ "; set -x; qemu-aarch64-static ./wget/wget_busybox_aarch_arm64_Linux' &>> ./wget/README.md
           echo -e "" >> ./wget/README.md
           echo '```' >> ./wget/README.md
           echo -e "" >> ./wget/README.md             
           echo '---' >> ./wget/README.md
           echo -e "" >> ./wget/README.md      
        working-directory: main
        continue-on-error: true
  #Finish      
      #https://github.com/stefanzweifel/git-auto-commit-action  
      - uses: stefanzweifel/git-auto-commit-action@v4
        with:
          repository: ./main        
          commit_user_name: Azathothas # defaults to "github-actions[bot]"
          commit_user_email: AjamX101@gmail.com # defaults to "41898282+github-actions[bot]@users.noreply.github.com"
          commit_message: Cross-Compile || Fetch latest Wget Binaries 
          #push_options: '--force'
